<!DOCTYPE html>
<html lang="en-us">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    
    
        <meta name="twitter:card" content="summary"/>
    



<meta name="twitter:title" content="Phd_data_dashboard"/>
<meta name="twitter:description" content=""/>
<meta name="twitter:site" content="@"/>



  	<meta property="og:title" content="Phd_data_dashboard &middot; Qiuhao Jin" />
  	<meta property="og:site_name" content="Qiuhao Jin" />
  	<meta property="og:url" content="https://qiuhao123.github.io/phd_analysis/" />
    
    
        
            <meta property="og:image" content="/images/cover.png"/>
        
    

    
    <meta property="og:description" content="" />
  	<meta property="og:type" content="article" />
    <meta property="article:published_time" content="2020-11-06T23:10:37-05:00" />

    
    

    <title>Phd_data_dashboard &middot; Qiuhao Jin</title>

    
    <meta name="description" content="The objective of this blog is to explore the Phd datase. We would like to build a data dashboard via streamlit package.
Dataset Data presented in Doctorate Reci" />
    

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="/images/favicon.ico">
	  <link rel="apple-touch-icon" href="/images/apple-touch-icon.png" />

    <link rel="stylesheet" type="text/css" href="/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="/css/nav.css" />

    

    

    
      
          <link href="/index.xml" rel="alternate" type="application/rss+xml" title="Qiuhao Jin" />
      
      
    
    <meta name="generator" content="Hugo 0.74.3" />

    <link rel="canonical" href="https://qiuhao123.github.io/phd_analysis/" />

    
      
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name":  null ,
        "logo": "https://qiuhao123.github.io/images/logo.png"
    },
    "author": {
        "@type": "Person",
        "name":  null ,
        
        "image": {
            "@type": "ImageObject",
            "url": "https://qiuhao123.github.io/images/logo.png",
            "width": 250,
            "height": 250
        }, 
        
        "url":  null ,
        "sameAs": [
            
            
             
             
             
             
             
            
        ]
    },
    "headline": "Phd_data_dashboard",
    "name": "Phd_data_dashboard",
    "wordCount":  610 ,
    "timeRequired": "PT3M",
    "inLanguage": {
      "@type": "Language",
      "alternateName": "en"
    },
    "url": "https://qiuhao123.github.io/phd_analysis/",
    "datePublished": "2020-11-06T23:10Z",
    "dateModified": "2020-11-06T23:10Z",
    
    
    "description": "",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://qiuhao123.github.io/phd_analysis/"
    }
}
    </script>
    


    

    

    
</head>
<body class="nav-closed">

  <div class="nav">
    <h3 class="nav-title">Menu</h3>
    <a href="#" class="nav-close">
        <span class="hidden">Close</span>
    </a>
    <ul>
        
        
        
            <br />
            <li class="nav-opened" role="presentation">
            	<a href="/">Home</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/euler-project/">Euler-Project</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/personal_website_blog/">Build a personal website with Hugo </a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/contact/">Contact</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/credit_risk/">Credit Risk Modeling</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/spotify_db_normalization/">Database Normalization</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/ad-analysis/">Ad Analysis</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/home_price/">Home_price</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/insect_image/">Insect Image Recognition</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/introduction_to_time_series_forecasting/">Introduction to Time Series Forecasting</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/malaria/">Malaria</a>
            </li>
        
            
            <li class="nav-opened nav-current" role="presentation">
            	<a href="/phd_analysis/">Phd_data_dashboard</a>
            </li>
        
            
            <li class="nav-opened" role="presentation">
            	<a href="/starwar/">Star War Data Acuisiqtion</a>
            </li>
        
        
    </ul>

    
    <a class="subscribe-button icon-feed" href="/index.xml">Subscribe</a>
    
</div>
<span class="nav-cover"></span>


 <div class="site-wrapper">





<header class="main-header post-head no-cover">
    <nav class="main-nav overlay clearfix">


      
        <a class="blog-logo" href="https://qiuhao123.github.io/"><img src="/images/logo.png" alt="Home" /></a>
      
      
          <a class="menu-button" href="#"><span class="burger">&#9776;</span><span class="word">Menu</span></a>
      
    </nav>

    


</header>



<main class="content" role="main">




  <article class="post ">
    <header class="post-header">
      <nav class="breadcrumb">
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <li><a href="/phd_analysis/">Phd_data_dashboard</a></li>
              
        
        
        
        
        
      </nav>


        <h1 class="post-title">Phd_data_dashboard</h1>
        <small></small>

        <section class="post-meta">
        
         
        </section>
    </header>

    <section class="post-content">


<p>The objective of this blog is to explore the <a href="https://ncses.nsf.gov/pubs/nsf19301/data">Phd datase</a>. We would like to build a data dashboard via streamlit package.</p>
<h3 id="dataset">Dataset</h3>
<p>Data presented in <em>Doctorate Recipients from U.S. Universities:</em> <em>2017</em> were collected by the Survey of Earned Doctorates (SED). The Survey collects data on the number and characteristics of individuals receiving research doctoral degrees from U.S. There are total 72 tables within the dataset. Let&rsquo;s talk about streamlit package.</p>
<h3 id="streamlit">Streamlit</h3>
<p>Streamlit is an open source app framework specifically designed for ML engineers working with Python. It allows you to create a stunning looking application with only a few lines of code.A few of the advantages of using Streamlit tools like Dash and Flask:</p>
<ul>
<li>It embraces Python scripting; No HTML knowledge is needed!</li>
<li>Less code is needed to create a beautiful application</li>
<li>No callbacks are needed since widgets are treated as variables</li>
<li>Data caching simplifies and speeds up computation pipelines.</li>
</ul>
<h4 id="installation">Installation</h4>
<p>In order to install the streamlit package. We can use the following command in Mac terminal:</p>
<pre><code>pip install streamlit
</code></pre><p>we can open the terminal with following command</p>
<pre><code>streamlit hello
</code></pre><h4 id="dashboard">Dashboard</h4>
<p>we first import all the neccesary package to perform data analysis</p>
<pre><code>import streamlit as st
import pandas as pd
import numpy as np
import plotly.express as px
from plotly.subplots import make_subplots
import plotly.graph_objects as go
import matplotlib.pyplot as plt
from plotly import tools
import plotly.offline as py
</code></pre><p>then, let me introduce some basic features that you are likely to be using in your own apps. We will first read in the &ldquo;sed17-sr-tab005&rdquo; excel file and display a colormap with following code</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_excel(<span style="color:#e6db74">&#39;data_tables/sed17-sr-tab005.xlsx&#39;</span>)
df <span style="color:#f92672">=</span> df[<span style="color:#ae81ff">2</span>:]
df<span style="color:#f92672">.</span>columns <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>iloc[<span style="color:#ae81ff">0</span>]
df <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>drop(df<span style="color:#f92672">.</span>index[<span style="color:#ae81ff">0</span>])
df_ <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;https://raw.githubusercontent.com/plotly/datasets/master/2011_us_ag_exports.csv&#39;</span>)
df_code <span style="color:#f92672">=</span> df_[[<span style="color:#e6db74">&#39;code&#39;</span>,<span style="color:#e6db74">&#39;state&#39;</span>]]
result <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(df, df_code, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;inner&#39;</span>, left_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;State or location&#39;</span>, right_on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;state&#39;</span>)

<span style="color:#66d9ef">if</span> st<span style="color:#f92672">.</span>checkbox(<span style="color:#e6db74">&#39;Show Dataframe--Number of Doctorate recipients by States&#39;</span>):
    st<span style="color:#f92672">.</span>write(result)

fig <span style="color:#f92672">=</span> go<span style="color:#f92672">.</span>Figure(data<span style="color:#f92672">=</span>go<span style="color:#f92672">.</span>Choropleth(
    locations<span style="color:#f92672">=</span>result[<span style="color:#e6db74">&#39;code&#39;</span>], <span style="color:#75715e"># Spatial coordinates</span>
    z <span style="color:#f92672">=</span> result[<span style="color:#e6db74">&#39;Doctorate recipients&#39;</span>]<span style="color:#f92672">.</span>astype(float), <span style="color:#75715e"># Data to be color-coded</span>
    locationmode <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;USA-states&#39;</span>, <span style="color:#75715e"># set of locations match entries in `locations`</span>
    colorscale <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;blues&#39;</span>,
    colorbar_title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Number of Doctorate recipients&#34;</span>,
))

fig<span style="color:#f92672">.</span>update_layout(
    title_text <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;State, ranked by number of doctorate recipients: 2017&#39;</span>,
    geo_scope<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;usa&#39;</span>, <span style="color:#75715e"># limite map scope to USA</span>
)

st<span style="color:#f92672">.</span>plotly_chart(fig)
</code></pre></div><p><img src="/images/phd_analysis/colortable.png" alt="image alter text"></p>
<p>we would then display a multiselect box with &ldquo;sed17-sr-tab006&rdquo; excel file.</p>
<pre><code>df_6 = pd.read_excel('data_tables/sed17-sr-tab006.xlsx')
df_6 = df_6.iloc[2:5,1:]
subjects = df_6.iloc[0].dropna().to_list()
df_male = df_6.iloc[2].to_list()[::2]
df_female = df_6.iloc[2].to_list()[1::2]
df_6 = pd.DataFrame({'Male': df_male,
                  'Female': df_female},
                  index=subjects)

sex = ['Male','Female']



if st.checkbox('Show Dataframe--Doctorates awarded by sex'):
    st.write(df_6)

selected_metrics_2 = st.selectbox(
    label=&quot;Choose...&quot;, options=subjects
)

fig = go.Figure()
for i in subjects:
    if selected_metrics_2 == i:
        fig = go.Figure(data=[go.Pie(labels=sex, values=df_6.loc[i],title= i+' Doctorates awarded by sex')])


st.plotly_chart(fig, use_container_width=True)



subset_data = df_2
country_name_input = st.multiselect('Choose one or more', df_2.columns[1:])
# by country name
if len(country_name_input) &gt; 0:
    subset_data = df_2[country_name_input]

fig = go.Figure()
for i in subset_data.columns:
        fig.add_trace(go.Scatter(x=df_2.Year, y=df_2[i],
                        mode='lines+markers',
                        name=i))

st.plotly_chart(fig, use_container_width=True)

</code></pre><p><img src="/images/phd_analysis/multiselect.png" alt="image alter text"></p>
<p>Lastly, we would like to display a piechart for &ldquo;sed17-sr-tab002&rdquo; file to display the portion of Doctorate-granting by sex</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">df_2 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_excel(<span style="color:#e6db74">&#39;data_tables/sed17-sr-tab002.xlsx&#39;</span>)
df_2 <span style="color:#f92672">=</span> df_2<span style="color:#f92672">.</span>iloc[<span style="color:#ae81ff">4</span>:,:]
df_2<span style="color:#f92672">.</span>columns <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;Year&#39;</span>,<span style="color:#e6db74">&#39;Doctorate-granting institutions&#39;</span>,<span style="color:#e6db74">&#39;Total&#39;</span>,<span style="color:#e6db74">&#39;Mean (per institution)&#39;</span>,<span style="color:#e6db74">&#39;Median (per institution)&#39;</span>]
<span style="color:#75715e">#df_2 = pd.read_csv(&#39;&#39;)</span>
<span style="color:#66d9ef">if</span> st<span style="color:#f92672">.</span>checkbox(<span style="color:#e6db74">&#39;Show Dataframe--Number of Doctorate recipients by Institutions&#39;</span>):
    st<span style="color:#f92672">.</span>write(df_2)

selected_metrics <span style="color:#f92672">=</span> st<span style="color:#f92672">.</span>selectbox(
    label<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Choose...&#34;</span>, options<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;Doctorate-granting institutions&#39;</span>,<span style="color:#e6db74">&#39;Total&#39;</span>,<span style="color:#e6db74">&#39;Mean (per institution)&#39;</span>,<span style="color:#e6db74">&#39;Median (per institution)&#39;</span>]
)


fig <span style="color:#f92672">=</span> go<span style="color:#f92672">.</span>Figure()
<span style="color:#66d9ef">if</span> selected_metrics <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Doctorate-granting institutions&#39;</span>:
    fig<span style="color:#f92672">.</span>add_trace(go<span style="color:#f92672">.</span>Scatter(x<span style="color:#f92672">=</span>df_2<span style="color:#f92672">.</span>Year, y<span style="color:#f92672">=</span>df_2[<span style="color:#e6db74">&#39;Doctorate-granting institutions&#39;</span>],
                    mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;lines+markers&#39;</span>,
                    name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Doctorate-granting institutions&#39;</span>))
<span style="color:#66d9ef">if</span> selected_metrics <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Total&#39;</span>:
    fig<span style="color:#f92672">.</span>add_trace(go<span style="color:#f92672">.</span>Scatter(x<span style="color:#f92672">=</span>df_2<span style="color:#f92672">.</span>Year, y<span style="color:#f92672">=</span>df_2<span style="color:#f92672">.</span>Total,
                        mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;lines+markers&#39;</span>, name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Total&#39;</span>))
<span style="color:#66d9ef">if</span> selected_metrics <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Mean (per institution)&#39;</span>:
    fig<span style="color:#f92672">.</span>add_trace(go<span style="color:#f92672">.</span>Scatter(x<span style="color:#f92672">=</span>df_2<span style="color:#f92672">.</span>Year, y<span style="color:#f92672">=</span>df_2[<span style="color:#e6db74">&#39;Mean (per institution)&#39;</span>],
                        mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;lines+markers&#39;</span>,
                        name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Mean (per institution)&#39;</span>))

<span style="color:#66d9ef">if</span> selected_metrics <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Median (per institution)&#39;</span>:
    fig<span style="color:#f92672">.</span>add_trace(go<span style="color:#f92672">.</span>Scatter(x<span style="color:#f92672">=</span>df_2<span style="color:#f92672">.</span>Year, y<span style="color:#f92672">=</span>df_2[<span style="color:#e6db74">&#39;Median (per institution)&#39;</span>],
                        mode<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;lines+markers&#39;</span>,
                        name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Median (per institution)&#39;</span>))
st<span style="color:#f92672">.</span>plotly_chart(fig, use_container_width<span style="color:#f92672">=</span>True)
</code></pre></div><p><img src="/images/phd_analysis/piechart.png" alt="image alter text"></p>
<h4 id="run-the-dashboard">Run the dashboard</h4>
<p>in order to run the above application, we will go to the directory where your .py file is stored and run the following command</p>
<pre><code>streamlit run {filename}
</code></pre><p>The above precedure is required to successfully build a streamlit dashboard.</p>









    </section>


  <footer class="post-footer">


    
    <figure class="author-image">
        <a class="img" href="https://qiuhao123.github.io/" style="background-image: url(/images/logo.png)"><span class="hidden">Qiuhao Jin's Picture</span></a>
    </figure>
    

    








<figure class="author-image">
    <a class="img" href="https://qiuhao123.github.io/" style="background-image: url(/images/logo.png)"><span class="hidden">Qiuhao Jin's Picture</span></a>
</figure>


<section class="author">
  <h4><a href="https://qiuhao123.github.io/">Qiuhao Jin</a></h4>
  
  <p>Read <a href="https://qiuhao123.github.io/">more posts</a> by this author.</p>
  
  <div class="author-meta">
    <span class="author-location icon-location">Durham, NC, USA</span>
    
  </div>
</section>




    
<section class="share">
  <h4>Share this page</h4>
  <a class="icon-twitter" style="font-size: 1.4em" href="https://twitter.com/share?text=Phd_data_dashboard&nbsp;-&nbsp;Qiuhao%20Jin&amp;url=https%3a%2f%2fqiuhao123.github.io%2fphd_analysis%2f"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="hidden">Twitter</span>
  </a>
  <a class="icon-facebook" style="font-size: 1.4em" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fqiuhao123.github.io%2fphd_analysis%2f"
      onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="hidden">Facebook</span>
  </a>
  <a class="icon-pinterest" style="font-size: 1.4em" href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2fqiuhao123.github.io%2fphd_analysis%2f&amp;description=Phd_data_dashboard"
      onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
      <span class="hidden">Pinterest</span>
  </a>
  <a class="icon-google-plus" style="font-size: 1.4em" href="https://plus.google.com/share?url=https%3a%2f%2fqiuhao123.github.io%2fphd_analysis%2f"
     onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
      <span class="hidden">Google+</span>
  </a>
</section>



    







  </footer>
</article>

</main>

<aside class="read-next">
  
      <a class="read-next-story" style="no-cover" href="/insect_image/">
          <section class="post">
              <h2>Insect Image Recognition</h2>
              
          </section>
      </a>
  
  
      <a class="read-next-story prev" style="no-cover" href="/starwar/">
          <section class="post">
              <h2>Star War Data Acuisiqtion</h2>
          </section>
      </a>
  
</aside>


    <footer class="site-footer clearfix">
        <section class="copyright"><a href="">Qiuhao Jin</a> © Qiuhao Jin Duke 2021</section>
        
        <section class="poweredby">Proudly generated by <a class="icon-hugo" href="http://gohugo.io">HUGO</a>, with <a class="icon-theme" href="https://github.com/vjeantet/hugo-theme-casper">Casper</a> theme</section>
        
    </footer>
    </div>
    <script type="text/javascript" src="/js/jquery.js"></script>
    <script type="text/javascript" src="/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/js/index.js"></script>
    
</body>
</html>

